<nav class='navbar' role='navigation'>
	<ol class='breadcrumb'>
		<li>
			<a ui-sref='hub.list_bill_uploads'>Bill Uploads</a>
		</li>
		<li class='active'>{{billId}}
	</ol>
</nav>
<div class='panel panel-default'>
	<div class='col-sm-12'>
		<form class='form-horizontal' role='form' style='padding-bottom: 80px;'>
			<div class='h3'></div>
			<div class='form-group col-xs-6'>
				<img src='http://placehold.it/250x450'>
			</div>
			<div class='form-group col-xs-6'>
				<div class='form-group'>
					<label class='control-label' for='upload_date'> Upload Date: </label> {{bill.created_at | date: 'dd-mm-yy hh:mm a'}}
				</div>
				<div class='form-group'>
					<label class='control-label' for='user_id'> User ID: </label> {{bill.user}}
				</div>
				<div class='form-group'>
					<label class='control-label' for='user_phone'> User Phone: </label> {{bill.phone}}
				</div>
				<div class='form-group'>
					<label class='control-label' for='user_email'> User Email: </label> {{bill.email}} {{bill.status}}
				</div>
				<div class='form-group' ng-if='bill_process[bill.status]'>
					<label class='control-label' for='next_question'> {{bill_process[bill.status].question}}</label>
					<div class='form-group'>
						<button class='btn btn-info' ng-click='triggerPositiveEvent()'>Yes</button>
						<button class='btn btn-warning col-xs-offset-1' ng-click='triggerNegetiveEvent()'>No</button>
					</div>
				</div>
				<div class='form-group' ng-if='bill.status > 3'>
					<label class='control-label' for='bill-details'>Bill Details</label>
					<div class='col-xs-12'>
						<div class='form-group'>
							<label class='control-label' for='merchent_name'>Merchant Name: </label> {{bill.merchant_name}}
						</div>
						<div class='form-group'>
							<label class='control-label' for='outlet_name'>Outlet Name: </label> {{bill.outlet_name}}
						</div>
						<div class='form-group'>
							<label class='control-label' for='outlet_location'>Outlet Location: </label> {{bill.outlet_location}}
						</div>
						<div class='form-group'>
							<label class='control-label' for='bill_no'>Bill No. </label> {{bill.invoice_no}}
						</div>
						<div class='form-group'>
							<label class='control-label' for='bill_date'>Bill Date: </label> {{bill.timestamp | date: 'dd-MMM-yy'}}
						</div>
						<div class='form-group'>
							<label class='control-label' for='bill_time'>Bill Time: </label> {{bill.timestamp | date: 'hh-mm a'}}
						</div>
						<div class='form-group'>
							<label class='control-label' for='bill_amt'>Bill Amount: </label> {{bill.bill_amt}}
						</div>
					</div>
				</div>
			</div>
			<div class='form-group col-xs-12' style='padding-top:10px;padding-bottom:20px;' ng-show='bill.status === 3'>
				<label class='control-label' for='bill-details'>Detailed Bill Info</label>
				<div class='form-group'>
					<label class='control-label' for='bill_merchent_name'>Merchant Name</label>
					<input class='form-control' type='text' ng-model='bill_info.merchant_name' />
				</div>
				<div class='form-group'>
					<label class='control-label' for='bill_outlet_name'>Outlet Name</label>
					<input class='form-control' type='text' ng-model='bill_info.outlet_name' />
				</div>
				<div class='form-group'>
					<label class='control-label' for='bill_outlet_location'>Outlet Location</label>
					<input class='form-control' type='text' ng-model='bill_info.outlet_location' />
				</div>
				<div class='form-group'>
					<label class='control-label' for='bill_invoice_no'>Invoice Number</label>
					<input class='form-control' type='text' ng-model='bill_info.invoice_no' />
				</div>
				<div class='form-group col-xs-12 col-sm-6'>
					<label class='control-label' for='bill_date'>Billing Date</label>
					<datepicker ng-model='bill_info.timestamp' show-weeks='false' class='well well-sm'></datepicker>
				</div>
				<div class='form-group col-xs-12 col-sm-6'>
					<label class='control-label' for='bill_time'>Billing Time</label>
					<timepicker ng-model='bill_info.timestamp' mousewheel='false'></timepicker>
				</div>
				<div class='clearfix'></div>
				<div class='form-group'>
					<label class='control-label' for='bill_amount'>Bill Amount</label>
					<input class='form-control' type='number' ng-model='bill_info.bill_amt' />
				</div>
				<div class='form-group'>
					<button class='btn btn-info pull-right' ng-click='uploadBillInfo()'>Submit</button>
				</div>
			</div>
			<div class='form-group col-xs-12' style='padding-bottom:64px;' ng-if='bill.status == 4'>
				<label class='control-label' for='pending_bills'>Redemptions Pending Bills</label>
				<div class='panel panel-default'>
					<table class='table'>
						<thead>
							<th>S. No.</th>
							<th>Offer ID</th>
							<th>Offer</th>
							<th>Date</th>
							<th>Time</th>
							<th>Action</th>
						</thead>
						<tbody>
							<tr ng-repeat='redemption in pending_redepmtions'>
								<td>{{$index + 1}}</td>
								<td>{{redemption.offer._id}}</td>
								<td>{{redemption.offer.name}}</td>
								<td>{{redemption.redemption_date | date: 'dd-MMM-yy'}}</td>
								<td>{{redemption.redemption_date | date: 'hh:mm a'}}</td>
								<td>
									<a ng-click='linkWithBill($index)' class='btn btn-info'>Link</a>
								</td>
							</tr>
						</tbody>
					</table>	
				</div>
			</div>
			<div class='form-group' ng-if='bill.status>=4'>
				<div>
					<button class='btn btn-success btn-lg' ng-click='sendForMerchantVerification()'>Forward to Merchant</button>
				</div>
			</div>
		</form>
	</div>
</div>